!function(r,a,s){"use strict";function h(){return this.init.apply(this,arguments)}h.prototype={defaults:{onstatechange:function(){},ondragend:function(){},onbarclicked:function(){},isRange:!1,showLabels:!0,showScale:!0,step:1,format:"%s",theme:"theme-green",width:300,disable:!1,snap:!1},template:'<div class="slider-container">\t\t\t<div class="back-bar">                <div class="selected-bar"></div>                <div class="pointer low"></div><div class="pointer-label low">123456</div>                <div class="pointer high"></div><div class="pointer-label high">456789</div>                <div class="clickable-dummy"></div>            </div>            <div class="scale"></div>\t\t</div>',init:function(t,i){this.options=r.extend({},this.defaults,i),this.inputNode=r(t),this.options.value=this.inputNode.val()||(this.options.isRange?this.options.from+","+this.options.from:""+this.options.from),this.domNode=r(this.template),this.domNode.addClass(this.options.theme),this.inputNode.after(this.domNode),this.domNode.on("change",this.onChange),this.pointers=r(".pointer",this.domNode),this.lowPointer=this.pointers.first(),this.highPointer=this.pointers.last(),this.labels=r(".pointer-label",this.domNode),this.lowLabel=this.labels.first(),this.highLabel=this.labels.last(),this.scale=r(".scale",this.domNode),this.bar=r(".selected-bar",this.domNode),this.clickableBar=this.domNode.find(".clickable-dummy"),this.interval=this.options.to-this.options.from,this.render()},render:function(){0!==this.inputNode.width()||this.options.width?(this.options.width=this.options.width||this.inputNode.width(),this.domNode.width(this.options.width),this.inputNode.hide(),this.isSingle()&&(this.lowPointer.hide(),this.lowLabel.hide()),this.options.showLabels||this.labels.hide(),this.attachEvents(),this.options.showScale&&this.renderScale(),this.setValue(this.options.value)):console.log("jRange : no width found, returning")},isSingle:function(){return"number"==typeof this.options.value||-1===this.options.value.indexOf(",")&&!this.options.isRange},attachEvents:function(){this.clickableBar.click(r.proxy(this.barClicked,this)),this.pointers.on("mousedown touchstart",r.proxy(this.onDragStart,this)),this.pointers.bind("dragstart",function(t){t.preventDefault()})},onDragStart:function(t){var i;this.options.disable||"mousedown"===t.type&&1!==t.which||(t.stopPropagation(),t.preventDefault(),i=r(t.target),this.pointers.removeClass("last-active"),i.addClass("focused last-active"),this[(i.hasClass("low")?"low":"high")+"Label"].addClass("focused"),r(s).on("mousemove.slider touchmove.slider",r.proxy(this.onDrag,this,i)),r(s).on("mouseup.slider touchend.slider touchcancel.slider",r.proxy(this.onDragEnd,this)))},onDrag:function(t,i){i.stopPropagation(),i.preventDefault(),i.originalEvent.touches&&i.originalEvent.touches.length?i=i.originalEvent.touches[0]:i.originalEvent.changedTouches&&i.originalEvent.changedTouches.length&&(i=i.originalEvent.changedTouches[0]);var s=i.clientX-this.domNode.offset().left;this.domNode.trigger("change",[this,t,s])},onDragEnd:function(t){this.pointers.removeClass("focused").trigger("rangeslideend"),this.labels.removeClass("focused"),r(s).off(".slider"),this.options.ondragend.call(this,this.options.value)},barClicked:function(t){var i,s,o,e,n,a,h,l;this.options.disable||(i=t.pageX-this.clickableBar.offset().left,this.isSingle()?this.setPosition(this.pointers.last(),i,!0,!0):(s=Math.abs(parseFloat(this.pointers.first().css("left"),10)),o=this.pointers.first().width()/2,e=Math.abs(parseFloat(this.pointers.last().css("left"),10)),n=this.pointers.first().width()/2,l=(a=Math.abs(s-i+o))==(h=Math.abs(e-i+n))?i<s?this.pointers.first():this.pointers.last():a<h?this.pointers.first():this.pointers.last(),this.setPosition(l,i,!0,!0)),this.options.onbarclicked.call(this,this.options.value))},onChange:function(t,i,s,o){var e=0,n=i.domNode.width();i.isSingle()||(e=s.hasClass("high")?parseFloat(i.lowPointer.css("left"))+i.lowPointer.width()/2:0,n=s.hasClass("low")?parseFloat(i.highPointer.css("left"))+i.highPointer.width()/2:i.domNode.width());var a=Math.min(Math.max(o,e),n);i.setPosition(s,a,!0)},setPosition:function(t,i,s,o){var e,n=parseFloat(this.lowPointer.css("left")),a=parseFloat(this.highPointer.css("left"))||0,h=this.highPointer.width()/2;if(s||(i=this.prcToPx(i)),this.options.snap){var l=this.correctPositionForSnap(i);if(-1===l)return;i=l}t[0]===this.highPointer[0]?a=Math.round(i-h):n=Math.round(i-h),t[o?"animate":"css"]({left:Math.round(i-h)}),this.isSingle()?e=0:e=n+h;var r=Math.round(a+h-e);this.bar[o?"animate":"css"]({width:Math.abs(r),left:0<r?e:e+r}),this.showPointerValue(t,i,o),this.isReadonly()},correctPositionForSnap:function(t){var i=this.positionToValue(t)-this.options.from,s=this.options.width/(this.interval/this.options.step),o=i/this.options.step*s;return t<=o+s/2&&o-s/2<=t?o:-1},setValue:function(t){var i=t.toString().split(",");i[0]=Math.min(Math.max(i[0],this.options.from),this.options.to)+"",1<i.length&&(i[1]=Math.min(Math.max(i[1],this.options.from),this.options.to)+""),this.options.value=t;var s=this.valuesToPrc(2===i.length?i:[0,i[0]]);this.isSingle()||this.setPosition(this.lowPointer,s[0]),this.setPosition(this.highPointer,s[1])},renderScale:function(){for(var t=this.options.scale||[this.options.from,this.options.to],i=Math.round(100/(t.length-1)*10)/10,s="",o=0;o<t.length;o++)s+='<span style="left: '+o*i+'%">'+("|"!=t[o]?"<ins>"+t[o]+"</ins>":"")+"</span>";this.scale.html(s),r("ins",this.scale).each(function(){r(this).css({marginLeft:-r(this).outerWidth()/2})})},getBarWidth:function(){var t=this.options.value.split(",");return 1<t.length?parseFloat(t[1])-parseFloat(t[0]):parseFloat(t[0])},showPointerValue:function(t,i,s){var o,e,n=r(".pointer-label",this.domNode)[t.hasClass("low")?"first":"last"](),a=this.positionToValue(i);e=r.isFunction(this.options.format)?(o=this.isSingle()?void 0:t.hasClass("low")?"low":"high",this.options.format(a,o)):this.options.format.replace("%s",a);var h=n.html(e).width(),l=i-h/2,l=Math.min(Math.max(l,0),this.options.width-h);n[s?"animate":"css"]({left:l}),this.setInputValue(t,a)},valuesToPrc:function(t){return[100*(parseFloat(t[0])-parseFloat(this.options.from))/this.interval,100*(parseFloat(t[1])-parseFloat(this.options.from))/this.interval]},prcToPx:function(t){return this.domNode.width()*t/100},isDecimal:function(){return-1!==(this.options.value+this.options.from+this.options.to).indexOf(".")},positionToValue:function(t){var i=t/this.domNode.width()*this.interval,i=parseFloat(i,10)+parseFloat(this.options.from,10);if(this.isDecimal()){var s=Math.round(Math.round(i/this.options.step)*this.options.step*100)/100;if(0!==s)for(-1===(s=""+s).indexOf(".")&&(s+=".");s.length-s.indexOf(".")<3;)s+="0";else s="0.00";return s}return Math.round(i/this.options.step)*this.options.step},setInputValue:function(t,i){var s;this.isSingle()?this.options.value=i.toString():(s=this.options.value.split(","),t.hasClass("low")?this.options.value=i+","+s[1]:this.options.value=s[0]+","+i),this.inputNode.val()!==this.options.value&&(this.inputNode.val(this.options.value).trigger("change"),this.options.onstatechange.call(this,this.options.value))},getValue:function(){return this.options.value},getOptions:function(){return this.options},getRange:function(){return this.options.from+","+this.options.to},isReadonly:function(){this.domNode.toggleClass("slider-readonly",this.options.disable)},disable:function(){this.options.disable=!0,this.isReadonly()},enable:function(){this.options.disable=!1,this.isReadonly()},toggleDisable:function(){this.options.disable=!this.options.disable,this.isReadonly()},updateRange:function(t,i){var s=t.toString().split(",");this.interval=parseInt(s[1])-parseInt(s[0]),i?this.setValue(i):this.setValue(this.getValue())}};var l="jRange";r.fn[l]=function(o){var e,n=arguments;return this.each(function(){var t=r(this),i=r.data(this,"plugin_"+l),s="object"==typeof o&&o;i||(t.data("plugin_"+l,i=new h(this,s)),r(a).resize(function(){i.setValue(i.getValue())})),"string"==typeof o&&(e=i[o].apply(i,Array.prototype.slice.call(n,1)))}),e||this}}(jQuery,window,document);